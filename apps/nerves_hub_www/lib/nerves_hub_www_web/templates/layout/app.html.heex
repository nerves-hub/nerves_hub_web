<!DOCTYPE html>
<html lang="en">
  <head>
    <%= live_title_tag assigns[:page_title] || "NervesHub" %>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/languages/bash.min.js"></script>
    <script>hljs.highlightAll();</script>
  </head>

  <body>
    <%= if view_module(@conn) == NervesHubWWWWeb.HomeView do %>
      <div class="home-wrapper">
        <main role="main" class="flex-column">
          <%= if info = get_flash(@conn, :info) do %>
            <div class="alert alert-info alert-dismissible">
              <div class="content-container">
                <%= info %>
                <button type="button" class="btn-close" data-bs-dismiss="alert">&times;</button>
              </div>
            </div>
          <% end %>
          <%= if error = get_flash(@conn, :error) do %>
            <div class="alert alert-danger alert-dismissible">
              <div class="content-container">
                <%= error %>
                <button type="button" class="btn-close" data-bs-dismiss="alert">&times;</button>
              </div>
            </div>
          <% end %>
          <%= @inner_content %>
        </main>
      </div>
    <% else %>
      <div class="normal-wrapper">
        <%= render("_navigation.html", conn: @conn) %>
        <main role="main" class="flex-column content-container">
          <%= if info = get_flash(@conn, :info) do %>
            <div class="alert alert-info alert-dismissible">
              <button type="button" class="btn-close" data-bs-dismiss="alert">&times;</button>
              <%= info %>
            </div>
          <% end %>
          <%= if error = get_flash(@conn, :error) do %>
            <div class="alert alert-danger alert-dismissible">
              <button type="button" class="btn-close" data-bs-dismiss="alert">&times;</button>
              <%= error %>
            </div>
          <% end %>
          <%= render("_tabnav.html", conn: @conn) %>
          <%= @inner_content %>
        </main>
      </div>
    <% end %>

    <%= render("_footer.html", conn: @conn) %>
    <script>
      window.userToken = "<%= assigns[:user_token] %>"
      window.orgId = "<%= assigns[:org] && Map.get(assigns[:org], :id) %>"
    </script>
    <%= csrf_meta_tag() %>
    <script phx-track-static type="text/javascript" src={Routes.static_path(@conn, "/js/app.js")}></script>
  </body>
</html>
